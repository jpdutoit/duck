extern struct frequency;

extern SAMPLE_RATE: frequency;

extern function operator+(float, float) -> float;
extern function hz(float) -> frequency;
extern function operator/(frequency, frequency) -> float;
extern function operator%(float, float) -> float;

module Phasor {
  freq: frequency = 440 hz;
  phase: mono = 0;
  output: mono = 0;
  input: freq;

  function tick() {
    output = phase;
    phase = (phase + (freq / SAMPLE_RATE)) % 1.0;
  }

  function reset() {
    phase = 0;
  }
}


p1: Phasor;
p1.freq >> Phasor;
p1.freq >> Phasor.freq;

p1.reset();
p1.reset();
